import{l as Ze,g as je,i as Oe,f as z,a as p,e as le,s as C,j as pe,t as _e}from"../chunks/B5h2buGC.js";import"../chunks/BYCsoV3H.js";import{l as he,m as De,aK as He,w as F,u as Ie,r as ne,aL as Ke,B as ke,I as be,b as se,g as d,ah as Z,N as v,M as f,O as n,K as L,L as ge,F as x,J as xe}from"../chunks/DooXT4Vr.js";import{a as ze,i as w,s as ye}from"../chunks/RfVbO2-W.js";import{i as Re}from"../chunks/BLdTtp0P.js";import{o as Ge,a as Je}from"../chunks/BYyawWHe.js";import{r as fe,p as $,s as R,e as Qe,i as Ue}from"../chunks/B-q4_de2.js";import{b as We}from"../chunks/BmGLqeJQ.js";function Xe(e,t,u,_,s){he&&De();var i=t.$$slots?.[u],r=!1;i===!0&&(i=t.children,r=!0),i===void 0||i(e,r?()=>_:_)}function me(e,t,u=t){var _=He(),s=new WeakSet;Ze(e,"input",i=>{var r=i?e.defaultValue:e.value;if(r=ie(e)?oe(r):r,u(r),F!==null&&s.add(F),_&&r!==(r=t())){var m=e.selectionStart,b=e.selectionEnd;e.value=r??"",b!==null&&(e.selectionStart=m,e.selectionEnd=Math.min(b,e.value.length))}}),(he&&e.defaultValue!==e.value||Ie(t)==null&&e.value)&&(u(ie(e)?oe(e.value):e.value),F!==null&&s.add(F)),ne(()=>{var i=t();if(e===document.activeElement){var r=Ke??F;if(s.has(r))return}ie(e)&&i===oe(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function ie(e){var t=e.type;return t==="number"||t==="range"}function oe(e){return e===""?null:+e}function Ye(e,t,u=t){var _,s,i=()=>{cancelAnimationFrame(_),e.paused||(_=requestAnimationFrame(i));var r=e.currentTime;s!==r&&u(s=r)};_=requestAnimationFrame(i),e.addEventListener("timeupdate",i),ne(()=>{var r=Number(t());s!==r&&!isNaN(r)&&(e.currentTime=s=r)}),ke(()=>{cancelAnimationFrame(_),e.removeEventListener("timeupdate",i)})}function ea(e,t,u=t){var _=()=>{u(e.volume)};t()==null&&_(),je(e,["volumechange"],_,!1),ne(()=>{var s=Number(t());s!==e.volume&&!isNaN(s)&&(e.volume=s)})}function aa(e,t,u,_,s){var i=()=>{_(u[e])};u.addEventListener(t,i),i(),(u===document.body||u===window||u===document)&&ke(()=>{u.removeEventListener(t,i)})}const ta=!0,ra=!1,Ea=Object.freeze(Object.defineProperty({__proto__:null,prerender:ta,ssr:ra},Symbol.toStringTag,{value:"Module"}));function la(e,t){x(t,!0)}var sa=z('<audio crossorigin="anonymous"></audio>'),ia=z('<img class="track__cover svelte-1qkxdz5" alt="cover"/> <div class="track__info svelte-1qkxdz5"><div class="info__title svelte-1qkxdz5"> </div> <div class="info__artists svelte-1qkxdz5"><p class="info__artist svelte-1qkxdz5"> </p></div></div> <div class="track__time svelte-1qkxdz5"><time class="audio-progress__current-time svelte-1qkxdz5"><!></time> <span class="audio-progress__separator svelte-1qkxdz5">/</span> <time class="audio-progress__total-time svelte-1qkxdz5"><!></time></div>',1),oa=z('<div class="track__cover svelte-1qkxdz5"></div>'),na=(e,t)=>t(),va=pe('<svg class="ctrl-play svelte-1qkxdz5" color="var(--txt-first)" width="50" height="50" viewBox="0 0 16 16"><path fill="currentColor" d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"></path></svg>'),da=pe('<svg class="ctrl-play svelte-1qkxdz5" color="var(--txt-first)" width="50" height="50" viewBox="0 0 16 16"><path fill="currentColor" d="M10.804 8L5 4.633v6.734L10.804 8zm.792-.696a.802.802 0 0 1 0 1.392l-6.363 3.692C4.713 12.69 4 12.345 4 11.692V4.308c0-.653.713-.998 1.233-.696l6.363 3.692z"></path></svg>'),ca=(e,t)=>t(),ua=(e,t)=>{e.target===e.currentTarget&&t()},_a=z('<div class="band svelte-1qkxdz5"><label class="band__label svelte-1qkxdz5"> </label> <input class="band__slider svelte-1qkxdz5" type="range" min="0" max="1" step="0.01" value="0.5"/> <span class="band__value svelte-1qkxdz5"> </span></div>'),fa=z('<div class="eq-overlay svelte-1qkxdz5"><div class="eq-window svelte-1qkxdz5" role="dialog" aria-modal="true" aria-label="Equalizer"><button class="eq-close svelte-1qkxdz5" aria-label="Close equalizer">âœ•</button> <div class="eq-container svelte-1qkxdz5"><div class="equalizer eq-panel svelte-1qkxdz5"></div></div></div></div>'),ma=z('<div class="player svelte-1qkxdz5"><!> <div class="audio-progress svelte-1qkxdz5"><input type="range" class="audio-progress__slider svelte-1qkxdz5" min="0" step="0.1"/></div> <div class="player-content svelte-1qkxdz5"><div class="track-section svelte-1qkxdz5"><!></div> <div class="controls svelte-1qkxdz5"><button class="ctrl svelte-1qkxdz5" aria-label="previous"><svg class="ctrl-icon svelte-1qkxdz5" color="var(--txt-second)" width="32" height="32" viewBox="0 0 16 16"><path fill="currentColor" d="M2 2.5a.5.5 0 0 1 1 0v11a.5.5 0 0 1-1 0v-11Zm12 .502a1 1 0 0 0-1.579-.816l-7 4.963a1 1 0 0 0-.006 1.628l7 5.037A1 1 0 0 0 14 13.003V3.002ZM6 7.965l7-4.963v10L6 7.966Z"></path></svg></button> <button class="ctrl play svelte-1qkxdz5"><!></button> <button class="ctrl svelte-1qkxdz5" aria-label="next"><svg class="ctrl-icon svelte-1qkxdz5" color="var(--txt-second)" width="32" height="32" viewBox="0 0 16 16"><path fill="currentColor" d="M14 2.5a.5.5 0 1 0-1 0v11a.5.5 0 0 0 1 0v-11ZM2 3.002a1 1 0 0 1 1.579-.816l7 4.963a1 1 0 0 1 .006 1.628l-7 5.037A1 1 0 0 1 2 13.003V3.002Zm8 4.963L3 3.002v10l7-5.037Z"></path></svg></button></div> <div class="volume-section svelte-1qkxdz5"><button class="volume__btn volume__btn--min svelte-1qkxdz5" aria-label="Mute"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true" class="svelte-1qkxdz5"><path d="M11 5v14l-6-6H2V11h3l6-6z" fill="currentColor"></path></svg></button> <input class="volume__slider svelte-1qkxdz5" type="range" min="0" max="1" step="0.01" aria-label="Volume"/> <button class="volume__btn volume__btn--max svelte-1qkxdz5" aria-label="Max volume"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true" class="svelte-1qkxdz5"><path d="M11 5v14l-6-6H2V11h3l6-6z" fill="currentColor"></path><path d="M16.5 8.5a4.5 4.5 0 010 7" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"></path><path d="M19 6a7 7 0 010 12" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"></path></svg></button> <button class="ctrl svelte-1qkxdz5" aria-label="Equalizer"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 12h3M10 6h1M14 18h1M7 18h1M20 8h1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M6 12v5M9 6v11M13 2v15M17 8v10M21 4v14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div></div> <!></div>');function pa(e,t){be(t,!0);const[u,_]=ye(),s=()=>ze($,"$playerStore",u),i=[32,64,125,250,500,1e3,2e3,4e3,8e3,16e3];let r=Z(null),m=Z(0),b=Z(0),M=Z(.4),h,E,g=[],B=new Array(i.length).fill(0),N=Z(!1),j;function ve(a){if(isNaN(a))return"00:00";const l=Math.floor(a/60).toString().padStart(2,"0"),o=Math.floor(a%60).toString().padStart(2,"0");return`${l}:${o}`}function qe(){$.next()}function we(){$.prev()}function G(){x(N,!1)}se(()=>{typeof document<"u"&&(document.body.style.overflow=d(N)?"hidden":"auto")}),se(()=>{d(r)&&s().track&&(s().isPlaying?d(r).play().catch(console.error):d(r).pause())}),se(()=>{if(d(r)&&h&&g.length===0){E=h.createMediaElementSource(d(r));let a=E;i.forEach((l,o)=>{const c=h.createBiquadFilter();c.frequency.value=l,c.Q.value=1,o===0?c.type="lowshelf":o===i.length-1?c.type="highshelf":c.type="peaking",c.gain.value=Math.max(-10,Math.min(10,B[o])),a.connect(c),a=c,g.push(c)}),a.connect(h.destination)}}),Ge(()=>{h=new AudioContext,j=a=>{a.key==="Escape"&&d(N)&&G()},window.addEventListener("keydown",j)}),Je(()=>{h&&h.close(),j&&window.removeEventListener("keydown",j)});function Me(a,l){const o=Math.max(-10,Math.min(10,l));B[a]=o,g[a]&&(g[a].gain.value=o)}function Ee(a){return(a-.5)*20}var J=ma(),de=v(J);{var Se=a=>{var l=sa();We(l,o=>x(r,o),()=>d(r)),L(()=>R(l,"src",s().track.audio_url)),le("ended",l,()=>{$.next()}),le("error",l,o=>{const c=o.target;if(c&&c.error){const k=c.error;if(k.code===MediaError.MEDIA_ERR_ABORTED)return;console.error("Audio error:",k.message,"(code:",k.code,")")}else console.error("Unexpected audio error event")}),le("loadeddata",l,()=>{s().isPlaying&&d(r)&&d(r).play().catch(o=>{o.name!=="AbortError"&&console.error("Play error on loadeddata:",o)})}),Ye(l,()=>d(m),o=>x(m,o)),aa("duration","durationchange",l,o=>x(b,o)),ea(l,()=>d(M),o=>x(M,o)),p(a,l)};w(de,a=>{s().track&&a(Se)})}var Q=f(de,2),U=v(Q);fe(U),n(Q);var W=f(Q,2),X=v(W),Ae=v(X);{var Ce=a=>{var l=ia(),o=xe(l),c=f(o,2),k=v(c),O=v(k,!0);n(k);var D=f(k,2),H=v(D),I=v(H,!0);n(H),n(D),n(c);var S=f(c,2),y=v(S),ae=v(y);{var K=q=>{var T=_e();L(re=>C(T,re),[()=>ve(d(m))]),p(q,T)};w(ae,q=>{d(m)&&q(K)})}n(y);var V=f(y,4),te=v(V);{var A=q=>{var T=_e();L(re=>C(T,re),[()=>ve(d(b))]),p(q,T)};w(te,q=>{d(b)&&q(A)})}n(V),n(S),L(()=>{R(o,"src",s().track.cover_url),C(O,s().track.title),C(I,s().track.artist)}),p(a,l)},Le=a=>{var l=oa();p(a,l)};w(Ae,a=>{s().track?a(Ce):a(Le,!1)})}n(X);var Y=f(X,2),ce=v(Y);ce.__click=[na,we];var P=f(ce,2);P.__click=async()=>{h.state==="suspended"&&await h.resume(),$.togglePlayback()};var $e=v(P);{var Be=a=>{var l=va();p(a,l)},Ne=a=>{var l=da();p(a,l)};w($e,a=>{s().isPlaying?a(Be):a(Ne,!1)})}n(P);var Pe=f(P,2);Pe.__click=[ca,qe],n(Y);var ue=f(Y,2),ee=f(v(ue),2);fe(ee);var Ve=f(ee,4);Ve.__click=[la,N],n(ue),n(W);var Te=f(W,2);{var Fe=a=>{var l=fa();l.__click=[ua,G];var o=v(l),c=v(o);c.__click=G;var k=f(c,2),O=v(k);Qe(O,21,()=>i,Ue,(D,H,I)=>{var S=_a(),y=v(S),ae=v(y,!0);n(y);var K=f(y,2);K.__input=A=>{A.target instanceof HTMLInputElement&&Me(I,Ee(parseFloat(A.target.value)))};var V=f(K,2),te=v(V);n(V),n(S),L(A=>{C(ae,d(H)),C(te,`${A??""} dB`)},[()=>B[I].toFixed(1)]),p(D,S)}),n(O),n(k),n(o),n(l),p(a,l)};w(Te,a=>{d(N)&&a(Fe)})}n(J),L(()=>{R(U,"max",d(b)),R(P,"aria-label",s().isPlaying?"Pause":"Play")}),me(U,()=>d(m),a=>x(m,a)),me(ee,()=>d(M),a=>x(M,a)),p(e,J),ge(),_()}Oe(["click","input"]);var ha=z('<div class="player-reserved svelte-demzzd"><!></div>'),ka=z('<aside class="aside svelte-demzzd"><div class="aside__column svelte-demzzd"><a href="https://t.me/auserum" class="aside__item svelte-demzzd" rel="noopener noreferrer" target="_blank" aria-label="true"><i class="bi bi-telegram" style="font-size: 1.875rem; color: #ffffff;"></i></a> <a href="https://bsky.app/profile/nktauserum.bsky.social" class="aside__item svelte-demzzd" rel="noopener noreferrer" target="_blank" aria-label="true"><i class="bi bi-bluesky" style="font-size: 1.875rem; color:rgb(255,255,255);"></i></a> <a href="https://github.com/nktauserum" class="aside__item svelte-demzzd" rel="noopener noreferrer" target="_blank" aria-label="true"><i class="bi bi-github" style="font-size: 1.875rem; color:rgb(255,255,255);"></i></a></div></aside> <div class="container svelte-demzzd"><div class="children svelte-demzzd"><!></div> <!></div>',1);function Sa(e,t){be(t,!1);const[u,_]=ye(),s=()=>ze($,"$playerStore",u);Re();var i=ka(),r=f(xe(i),2),m=v(r),b=v(m);Xe(b,t,"default",{}),n(m);var M=f(m,2);{var h=E=>{var g=ha(),B=v(g);pa(B,{}),n(g),p(E,g)};w(M,E=>{s().track&&E(h)})}n(r),p(e,i),ge(),_()}export{Sa as component,Ea as universal};
