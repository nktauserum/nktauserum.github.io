import"../chunks/DsnmJJEf.js";import"../chunks/B0bwt5us.js";import{o as ca,s as P,e as J}from"../chunks/CSfqqDCb.js";import{m as ua,d as Sa,s as W,h as z,a0 as Aa,f as Ca,C as T,aA as Ma,j as ya,H as Ia,k as oa,l as Z,w as B,aa as Ra,af as La,n as ta,o as Na,c as Da,aK as va,R as G,aL as fa,ai as _a,a8 as ha,aM as Y,t as ma,v as ka,aN as F,aO as Ha,aP as aa,aQ as pa,ac as Pa,aR as Oa,a1 as Ua,aS as ja,a5 as za,aT as wa,q as $a,aU as qa,ax as Va,a6 as Ba,I as ga,J as D,K as I,M as xa,P as A,T as E,Q as q,W as da,X as ra,V as K,O as N}from"../chunks/Byirl2uD.js";import{i as sa}from"../chunks/CeK7U0bb.js";import{i as ba}from"../chunks/D4ROW9HB.js";import{s as X}from"../chunks/DXYpjaR4.js";import{s as Ga}from"../chunks/CdEA5IGF.js";function ia(i,e){return e}function Ka(i,e,a){for(var s=i.items,l=[],f=e.length,n=0;n<f;n++)Oa(e[n].e,l,!0);var u=f>0&&l.length===0&&a!==null;if(u){var h=a.parentNode;Ua(h),h.append(a),s.clear(),R(i,e[0].prev,e[f-1].next)}ja(l,()=>{for(var g=0;g<f;g++){var m=e[g];u||(s.delete(m.k),R(i,m.prev,m.next)),pa(m.e,!u)}})}function na(i,e,a,s,l,f=null){var n=i,u={flags:e,items:new Map,first:null},h=(e&wa)!==0;if(h){var g=i;n=z?W(Aa(g)):g.appendChild(ua())}z&&Ca();var m=null,y=!1,S=new Map,d=Ma(()=>{var p=a();return ha(p)?p:p==null?[]:_a(p)}),r,c;function o(){Qa(c,r,u,S,n,l,e,s,a),f!==null&&(r.length===0?m?ma(m):m=ta(()=>f(n)):m!==null&&ka(m,()=>{m=null}))}Sa(()=>{c??=za,r=T(d);var p=r.length;if(y&&p===0)return;y=p===0;let _=!1;if(z){var b=ya(n)===Ia;b!==(p===0)&&(n=oa(),W(n),Z(!1),_=!0)}if(z){for(var M=null,x,t=0;t<p;t++){if(B.nodeType===Ra&&B.data===La){n=B,_=!0,Z(!1);break}var v=r[t],w=s(v,t);x=la(B,u,M,null,v,w,t,l,e,a),u.items.set(w,x),M=x}p>0&&W(oa())}if(z)p===0&&f&&(m=ta(()=>f(n)));else if(Na()){var O=new Set,k=Da;for(t=0;t<p;t+=1){v=r[t],w=s(v,t);var L=u.items.get(w)??S.get(w);L?(e&(F|Y))!==0&&Ea(L,v,t,e):(x=la(null,u,null,null,v,w,t,l,e,a,!0),S.set(w,x)),O.add(w)}for(const[C,U]of u.items)O.has(C)||k.skipped_effects.add(U.e);k.add_callback(o)}else o();_&&Z(!0),T(d)}),z&&(n=B)}function Qa(i,e,a,s,l,f,n,u,h){var g=(n&qa)!==0,m=(n&(F|Y))!==0,y=e.length,S=a.items,d=a.first,r=d,c,o=null,p,_=[],b=[],M,x,t,v;if(g)for(v=0;v<y;v+=1)M=e[v],x=u(M,v),t=S.get(x),t!==void 0&&(t.a?.measure(),(p??=new Set).add(t));for(v=0;v<y;v+=1){if(M=e[v],x=u(M,v),t=S.get(x),t===void 0){var w=s.get(x);if(w!==void 0){s.delete(x),S.set(x,w);var O=o?o.next:r;R(a,o,w),R(a,w,O),ea(w,O,l),o=w}else{var k=r?r.e.nodes_start:l;o=la(k,a,o,o===null?a.first:o.next,M,x,v,f,n,h)}S.set(x,o),_=[],b=[],r=o.next;continue}if(m&&Ea(t,M,v,n),(t.e.f&aa)!==0&&(ma(t.e),g&&(t.a?.unfix(),(p??=new Set).delete(t))),t!==r){if(c!==void 0&&c.has(t)){if(_.length<b.length){var L=b[0],C;o=L.prev;var U=_[0],V=_[_.length-1];for(C=0;C<_.length;C+=1)ea(_[C],L,l);for(C=0;C<b.length;C+=1)c.delete(b[C]);R(a,U.prev,V.next),R(a,o,U),R(a,V,L),r=L,o=V,v-=1,_=[],b=[]}else c.delete(t),ea(t,r,l),R(a,t.prev,t.next),R(a,t,o===null?a.first:o.next),R(a,o,t),o=t;continue}for(_=[],b=[];r!==null&&r.k!==x;)(r.e.f&aa)===0&&(c??=new Set).add(r),b.push(r),r=r.next;if(r===null)continue;t=r}_.push(t),o=t,r=t.next}if(r!==null||c!==void 0){for(var H=c===void 0?[]:_a(c);r!==null;)(r.e.f&aa)===0&&H.push(r),r=r.next;var j=H.length;if(j>0){var Q=(n&wa)!==0&&y===0?l:null;if(g){for(v=0;v<j;v+=1)H[v].a?.measure();for(v=0;v<j;v+=1)H[v].a?.fix()}Ka(a,H,Q)}}g&&$a(()=>{if(p!==void 0)for(t of p)t.a?.apply()}),i.first=a.first&&a.first.e,i.last=o&&o.e;for(var $ of s.values())pa($.e);s.clear()}function Ea(i,e,a,s){(s&F)!==0&&va(i.v,e),(s&Y)!==0?va(i.i,a):i.i=a}function la(i,e,a,s,l,f,n,u,h,g,m){var y=(h&F)!==0,S=(h&Ha)===0,d=y?S?G(l,!1,!1):fa(l):l,r=(h&Y)===0?n:fa(n),c={i:r,v:d,k:f,a:null,e:null,prev:a,next:s};try{if(i===null){var o=document.createDocumentFragment();o.append(i=ua())}return c.e=ta(()=>u(i,d,r,g),z),c.e.prev=a&&a.e,c.e.next=s&&s.e,a===null?m||(e.first=c):(a.next=c,a.e.next=c.e),s!==null&&(s.prev=c,s.e.prev=c.e),c}finally{}}function ea(i,e,a){for(var s=i.next?i.next.e.nodes_start:a,l=e?e.e.nodes_start:a,f=i.e.nodes_start;f!==null&&f!==s;){var n=Pa(f);l.before(f),f=n}}function R(i,e,a){e===null?i.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function Xa(i,e,a){var s=Va(i,e);s&&s.set&&(i[e]=a,Ba(()=>{i[e]=null}))}function Ya(i,e){var a=i.$$events?.[e.type],s=ha(a)?a.slice():a==null?[]:[a];for(var l of s)l.call(this,e)}var Fa=D("<p>Загрузка...</p>"),Ja=D('<p class="error"> </p>'),Wa=D('<a class="tag svelte-1aoobli"> </a>'),Za=D('<div class="list__item svelte-1aoobli"><a class="title svelte-1aoobli"> </a> <p class="description svelte-1aoobli"> </p> <div class="meta svelte-1aoobli"><span class="date"> </span></div> <div class="tags svelte-1aoobli"></div></div>'),ae=D('<div class="list svelte-1aoobli"><!></div>');function ee(i,e){ga(e,!1);async function a(d=1,r=10){const c=new URLSearchParams({page:d.toString(),limit:r.toString()}),o=await fetch(`http://localhost:8080/articles?${c.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok){const _=await o.json().catch(()=>({message:o.statusText}));throw new Error(_.message||`Ошибка ${o.status}`)}return await o.json()}let s=G([]),l=1,f=10,n=G(!1),u=G(null);async function h(){q(n,!0),q(u,null);try{const{posts:d,page:r,limit:c}=await a(l,f);q(s,d),l=r,f=c}catch(d){q(u,d instanceof Error?d.message:String(d))}finally{q(n,!1)}}ca(h),ba();var g=ae(),m=A(g);{var y=d=>{var r=Fa();I(d,r)},S=d=>{var r=da(),c=ra(r);{var o=_=>{var b=Ja(),M=A(b,!0);E(b),K(()=>P(M,T(u))),I(_,b)},p=_=>{var b=da(),M=ra(b);na(M,1,()=>T(s),ia,(x,t)=>{var v=Za(),w=A(v),O=A(w,!0);E(w);var k=N(w,2),L=A(k,!0);E(k);var C=N(k,2),U=A(C),V=A(U,!0);E(U),E(C);var H=N(C,2);na(H,5,()=>T(t).tags,ia,(j,Q)=>{var $=Wa(),Ta=A($,!0);E($),K(()=>{X($,"href",`/?tag=${T(Q)??""}`),P(Ta,T(Q))}),I(j,$)}),E(H),E(v),K(j=>{X(w,"href",`/articles?post=${T(t).uuid??""}`),P(O,T(t).title),P(L,T(t).description),P(V,j)},[()=>new Date(T(t).created_at).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"})]),I(x,v)}),I(_,b)};sa(c,_=>{T(u)?_(o):_(p,!1)},!0)}I(d,r)};sa(m,d=>{T(n)?d(y):d(S,!1)})}return E(g),I(i,g),Xa(e,"fetchPosts",a),xa({fetchPosts:a})}var te=D('<a class="tag svelte-1jwx8yd"> </a>'),re=D('<header class="svelte-1jwx8yd"><img alt="avatar" class="avatar svelte-1jwx8yd"/> <div class="info svelte-1jwx8yd"><h1 class="name svelte-1jwx8yd"> </h1> <p class="description svelte-1jwx8yd"> </p> <div class="tags svelte-1jwx8yd"></div></div></header>');function se(i){const e={avatar:"https://avatars.githubusercontent.com/u/145584656?v=4",name:"Никита Архипов",description:"Описание профиля."},a=["Rust","Golang"];var s=re(),l=A(s),f=N(l,2),n=A(f),u=A(n,!0);E(n);var h=N(n,2),g=A(h,!0);E(h);var m=N(h,2);na(m,5,()=>a,ia,(y,S)=>{var d=te(),r=A(d,!0);E(d),K(()=>{X(d,"href",`/?tag=${T(S)??""}`),P(r,T(S))}),I(y,d)}),E(m),E(f),E(s),K(()=>{X(l,"src",e.avatar),P(u,e.name),P(g,e.description)}),I(i,s)}var ie=D('<div class="unauthorized-frame svelte-odmeox"><div class="window svelte-odmeox"><div class="popup svelte-odmeox"><img src="/images/unauthorized-access.jpg" alt="Unauthorized access" class="svelte-odmeox"/> <h1 class="text-2xl font-bold">Эй, дружок!</h1> <div class="mt-1 text-lg">Кажется, ты выбрал не тот эндпоинт. Вход для посетителей на главной странице.</div></div> <button class="close svelte-odmeox" aria-label="Close"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="svelte-odmeox"><path d="M1 1L15 15M15 1L1 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg></button></div></div>');function ne(i,e){function a(){window.location.href="/"}var s=ie(),l=A(s),f=N(A(l),2);E(l),E(s),J("click",f,a),J("click",l,Ga(function(n){Ya.call(this,e,n)})),J("click",s,a),I(i,s)}var le=D("<!> <!> <!>",1);function me(i,e){ga(e,!1);let a=G();ca(()=>{const h=new URLSearchParams(window.location.search);q(a,h.has("unauthorized"))}),ba();var s=le(),l=ra(s);{var f=h=>{ne(h,{})};sa(l,h=>{T(a)&&h(f)})}var n=N(l,2);se(n);var u=N(n,2);ee(u,{}),I(i,s),xa()}export{me as component};
