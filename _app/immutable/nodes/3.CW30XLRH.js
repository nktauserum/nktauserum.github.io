import"../chunks/DsnmJJEf.js";import"../chunks/B0bwt5us.js";import{o as j,h as C,e as w,r as $,s as J}from"../chunks/CSfqqDCb.js";import{I as R,J as P,C as e,K as H,M as S,O as l,P as v,_ as b,R as s,$ as z,Q as o,T as x,V as D}from"../chunks/Byirl2uD.js";import{i as I}from"../chunks/CeK7U0bb.js";import{r as K}from"../chunks/DXYpjaR4.js";import{b as g}from"../chunks/BB-Lxg4c.js";import{b as L}from"../chunks/57kcPgT5.js";import{p as N}from"../chunks/CdEA5IGF.js";import{i as Q}from"../chunks/D4ROW9HB.js";import{g as V}from"../chunks/DSyeBh8F.js";new TextEncoder;var A=P('<p class="error"> </p>'),B=P('<div class="post-container block"><form class="svelte-137kbop"><button type="submit" class="btn btn-submit svelte-137kbop">Опубликовать</button> <!> <input type="text" placeholder="Заголовок" required class="svelte-137kbop"/> <textarea placeholder="Описание" required class="description block svelte-137kbop"></textarea> <textarea placeholder="Текст поста" required class="content svelte-137kbop"></textarea></form></div>');function rt(T,q){R(q,!1);let p=s(""),c=s(""),m=s(""),i=s(null);async function E(){o(i,null);try{const t=await fetch("http://localhost:8080/admin/articles/create",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e(p),description:e(c),content:e(m)})});if(!t.ok)throw new Error("Login failed");const r=await t.json();V("/articles?post="+r.uuid)}catch(t){o(i,t.message)}}let a=s(),_;function y(){b(a,e(a).style.height="auto");const t=Math.max(e(a).scrollHeight,_);b(a,e(a).style.height=`${t}px`)}j(()=>{b(a,e(a).style.height="65vh"),_=e(a).clientHeight,y()}),Q();var u=B();C(t=>{z.title="Админка"});var d=v(u),k=l(v(d),2);{var M=t=>{var r=A(),O=v(r,!0);x(r),D(()=>J(O,e(i))),H(t,r)};I(k,t=>{e(i)&&t(M)})}var h=l(k,2);K(h);var f=l(h,2);$(f);var n=l(f,2);$(n),L(n,t=>o(a,t),()=>e(a)),x(d),x(u),g(h,()=>e(p),t=>o(p,t)),g(f,()=>e(c),t=>o(c,t)),g(n,()=>e(m),t=>o(m,t)),w("input",n,y),w("submit",d,N(E)),H(T,u),S()}export{rt as component};
