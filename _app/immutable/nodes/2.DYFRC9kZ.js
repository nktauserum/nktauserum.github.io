import"../chunks/DsnmJJEf.js";import"../chunks/D4h2GaMY.js";import{o as ua,s as P,e as W}from"../chunks/DOr-WeUw.js";import{m as _a,d as Aa,s as Z,h as j,a0 as Ca,f as Ma,C as T,aA as ya,j as Ia,H as Ra,k as va,l as aa,w as B,aa as La,af as Na,n as ra,o as Da,c as ka,aK as fa,R as G,aL as da,ai as ha,a8 as ma,aM as J,t as pa,v as Ha,aN as Q,aO as Pa,aP as ea,aQ as wa,ac as $a,aR as Oa,a1 as Ua,aS as ja,a5 as za,aT as ga,q as Va,aU as qa,ax as Ya,a6 as Ba,I as xa,J as D,K as I,M as ba,P as S,V as b,T as V,X as ca,Y as sa,W as q,O as N,aV as Ga}from"../chunks/nV_WJupt.js";import{i as ia}from"../chunks/DBMdUpg_.js";import{i as Ea}from"../chunks/DNKSQxea.js";import{s as K}from"../chunks/CNqlCY75.js";import{b as F}from"../chunks/D5HUhEbi.js";import{s as Ka}from"../chunks/CdEA5IGF.js";function na(i,e){return e}function Xa(i,e,a){for(var s=i.items,l=[],f=e.length,n=0;n<f;n++)Oa(e[n].e,l,!0);var u=f>0&&l.length===0&&a!==null;if(u){var _=a.parentNode;Ua(_),_.append(a),s.clear(),R(i,e[0].prev,e[f-1].next)}ja(l,()=>{for(var g=0;g<f;g++){var m=e[g];u||(s.delete(m.k),R(i,m.prev,m.next)),wa(m.e,!u)}})}function la(i,e,a,s,l,f=null){var n=i,u={flags:e,items:new Map,first:null},_=(e&ga)!==0;if(_){var g=i;n=j?Z(Ca(g)):g.appendChild(_a())}j&&Ma();var m=null,y=!1,A=new Map,d=ya(()=>{var p=a();return ma(p)?p:p==null?[]:ha(p)}),r,c;function o(){Fa(c,r,u,A,n,l,e,s,a),f!==null&&(r.length===0?m?pa(m):m=ra(()=>f(n)):m!==null&&Ha(m,()=>{m=null}))}Aa(()=>{c??=za,r=T(d);var p=r.length;if(y&&p===0)return;y=p===0;let h=!1;if(j){var E=Ia(n)===Ra;E!==(p===0)&&(n=va(),Z(n),aa(!1),h=!0)}if(j){for(var M=null,x,t=0;t<p;t++){if(B.nodeType===La&&B.data===Na){n=B,h=!0,aa(!1);break}var v=r[t],w=s(v,t);x=oa(B,u,M,null,v,w,t,l,e,a),u.items.set(w,x),M=x}p>0&&Z(va())}if(j)p===0&&f&&(m=ra(()=>f(n)));else if(Da()){var $=new Set,k=ka;for(t=0;t<p;t+=1){v=r[t],w=s(v,t);var L=u.items.get(w)??A.get(w);L?(e&(Q|J))!==0&&Ta(L,v,t,e):(x=oa(null,u,null,null,v,w,t,l,e,a,!0),A.set(w,x)),$.add(w)}for(const[C,O]of u.items)$.has(C)||k.skipped_effects.add(O.e);k.add_callback(o)}else o();h&&aa(!0),T(d)}),j&&(n=B)}function Fa(i,e,a,s,l,f,n,u,_){var g=(n&qa)!==0,m=(n&(Q|J))!==0,y=e.length,A=a.items,d=a.first,r=d,c,o=null,p,h=[],E=[],M,x,t,v;if(g)for(v=0;v<y;v+=1)M=e[v],x=u(M,v),t=A.get(x),t!==void 0&&(t.a?.measure(),(p??=new Set).add(t));for(v=0;v<y;v+=1){if(M=e[v],x=u(M,v),t=A.get(x),t===void 0){var w=s.get(x);if(w!==void 0){s.delete(x),A.set(x,w);var $=o?o.next:r;R(a,o,w),R(a,w,$),ta(w,$,l),o=w}else{var k=r?r.e.nodes_start:l;o=oa(k,a,o,o===null?a.first:o.next,M,x,v,f,n,_)}A.set(x,o),h=[],E=[],r=o.next;continue}if(m&&Ta(t,M,v,n),(t.e.f&ea)!==0&&(pa(t.e),g&&(t.a?.unfix(),(p??=new Set).delete(t))),t!==r){if(c!==void 0&&c.has(t)){if(h.length<E.length){var L=E[0],C;o=L.prev;var O=h[0],Y=h[h.length-1];for(C=0;C<h.length;C+=1)ta(h[C],L,l);for(C=0;C<E.length;C+=1)c.delete(E[C]);R(a,O.prev,Y.next),R(a,o,O),R(a,Y,L),r=L,o=Y,v-=1,h=[],E=[]}else c.delete(t),ta(t,r,l),R(a,t.prev,t.next),R(a,t,o===null?a.first:o.next),R(a,o,t),o=t;continue}for(h=[],E=[];r!==null&&r.k!==x;)(r.e.f&ea)===0&&(c??=new Set).add(r),E.push(r),r=r.next;if(r===null)continue;t=r}h.push(t),o=t,r=t.next}if(r!==null||c!==void 0){for(var H=c===void 0?[]:ha(c);r!==null;)(r.e.f&ea)===0&&H.push(r),r=r.next;var U=H.length;if(U>0){var X=(n&ga)!==0&&y===0?l:null;if(g){for(v=0;v<U;v+=1)H[v].a?.measure();for(v=0;v<U;v+=1)H[v].a?.fix()}Xa(a,H,X)}}g&&Va(()=>{if(p!==void 0)for(t of p)t.a?.apply()}),i.first=a.first&&a.first.e,i.last=o&&o.e;for(var z of s.values())wa(z.e);s.clear()}function Ta(i,e,a,s){(s&Q)!==0&&fa(i.v,e),(s&J)!==0?fa(i.i,a):i.i=a}function oa(i,e,a,s,l,f,n,u,_,g,m){var y=(_&Q)!==0,A=(_&Pa)===0,d=y?A?G(l,!1,!1):da(l):l,r=(_&J)===0?n:da(n),c={i:r,v:d,k:f,a:null,e:null,prev:a,next:s};try{if(i===null){var o=document.createDocumentFragment();o.append(i=_a())}return c.e=ra(()=>u(i,d,r,g),j),c.e.prev=a&&a.e,c.e.next=s&&s.e,a===null?m||(e.first=c):(a.next=c,a.e.next=c.e),s!==null&&(s.prev=c,s.e.prev=c.e),c}finally{}}function ta(i,e,a){for(var s=i.next?i.next.e.nodes_start:a,l=e?e.e.nodes_start:a,f=i.e.nodes_start;f!==null&&f!==s;){var n=$a(f);l.before(f),f=n}}function R(i,e,a){e===null?i.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function Ja(i,e,a){var s=Ya(i,e);s&&s.set&&(i[e]=a,Ba(()=>{i[e]=null}))}function Qa(i,e){var a=i.$$events?.[e.type],s=ma(a)?a.slice():a==null?[]:[a];for(var l of s)l.call(this,e)}var Wa=D("<p>Загрузка...</p>"),Za=D('<p class="error"> </p>'),ae=D('<a class="tag svelte-1aoobli"> </a>'),ee=D('<div class="list__item svelte-1aoobli"><a class="title svelte-1aoobli"> </a> <p class="description svelte-1aoobli"> </p> <div class="meta svelte-1aoobli"><span class="date"> </span></div> <div class="tags svelte-1aoobli"></div></div>'),te=D('<div class="list svelte-1aoobli"><!></div>');function re(i,e){xa(e,!1);async function a(d=1,r=10){const c=new URLSearchParams({page:d.toString(),limit:r.toString()}),o=await fetch(`http://localhost:8080/articles?${c.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok){const h=await o.json().catch(()=>({message:o.statusText}));throw new Error(h.message||`Ошибка ${o.status}`)}return await o.json()}let s=G([]),l=1,f=10,n=G(!1),u=G(null);async function _(){V(n,!0),V(u,null);try{const{posts:d,page:r,limit:c}=await a(l,f);V(s,d),l=r,f=c}catch(d){V(u,d instanceof Error?d.message:String(d))}finally{V(n,!1)}}ua(_),Ea();var g=te(),m=S(g);{var y=d=>{var r=Wa();I(d,r)},A=d=>{var r=ca(),c=sa(r);{var o=h=>{var E=Za(),M=S(E,!0);b(E),q(()=>P(M,T(u))),I(h,E)},p=h=>{var E=ca(),M=sa(E);la(M,1,()=>T(s),na,(x,t)=>{var v=ee(),w=S(v),$=S(w,!0);b(w);var k=N(w,2),L=S(k,!0);b(k);var C=N(k,2),O=S(C),Y=S(O,!0);b(O),b(C);var H=N(C,2);la(H,5,()=>T(t).tags,na,(U,X)=>{var z=ae(),Sa=S(z,!0);b(z),q(()=>{K(z,"href",`${F??""}/?tag=${T(X)??""}`),P(Sa,T(X))}),I(U,z)}),b(H),b(v),q(U=>{K(w,"href",`${F??""}/articles?post=${T(t).uuid??""}`),P($,T(t).title),P(L,T(t).description),P(Y,U)},[()=>new Date(T(t).created_at).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"})]),I(x,v)}),I(h,E)};ia(c,h=>{T(u)?h(o):h(p,!1)},!0)}I(d,r)};ia(m,d=>{T(n)?d(y):d(A,!1)})}return b(g),I(i,g),Ja(e,"fetchPosts",a),ba({fetchPosts:a})}var se=D('<a class="tag svelte-1jwx8yd"> </a>'),ie=D('<header class="svelte-1jwx8yd"><img alt="avatar" class="avatar svelte-1jwx8yd"/> <div class="info svelte-1jwx8yd"><h1 class="name svelte-1jwx8yd"> </h1> <p class="description svelte-1jwx8yd"> </p> <div class="tags svelte-1jwx8yd"></div></div></header>');function ne(i){const e={avatar:"https://avatars.githubusercontent.com/u/145584656?v=4",name:"Никита Архипов",description:"Описание профиля."},a=["Rust","Golang"];var s=ie(),l=S(s),f=N(l,2),n=S(f),u=S(n,!0);b(n);var _=N(n,2),g=S(_,!0);b(_);var m=N(_,2);la(m,5,()=>a,na,(y,A)=>{var d=se(),r=S(d,!0);b(d),q(()=>{K(d,"href",`${F??""}/?tag=${T(A)??""}`),P(r,T(A))}),I(y,d)}),b(m),b(f),b(s),q(()=>{K(l,"src",e.avatar),P(u,e.name),P(g,e.description)}),I(i,s)}var le=D('<div class="unauthorized-frame svelte-odmeox"><div class="window svelte-odmeox"><div class="popup svelte-odmeox"><img alt="Unauthorized access" class="svelte-odmeox"/> <h1 class="text-2xl font-bold">Эй, дружок!</h1> <div class="mt-1 text-lg">Кажется, ты выбрал не тот эндпоинт. Вход для посетителей на главной странице.</div></div> <button class="close svelte-odmeox" aria-label="Close"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="svelte-odmeox"><path d="M1 1L15 15M15 1L1 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg></button></div></div>');function oe(i,e){function a(){window.location.href="/"}var s=le(),l=S(s),f=S(l),n=S(f);Ga(4),b(f);var u=N(f,2);b(l),b(s),q(()=>K(n,"src",`${F??""}/images/unauthorized-access.jpg`)),W("click",u,a),W("click",l,Ka(function(_){Qa.call(this,e,_)})),W("click",s,a),I(i,s)}var ve=D("<!> <!> <!>",1);function ge(i,e){xa(e,!1);let a=G();ua(()=>{const _=new URLSearchParams(window.location.search);V(a,_.has("unauthorized"))}),Ea();var s=ve(),l=sa(s);{var f=_=>{oe(_,{})};ia(l,_=>{T(a)&&_(f)})}var n=N(l,2);ne(n);var u=N(n,2);re(u,{}),I(i,s),ba()}export{ge as component};
