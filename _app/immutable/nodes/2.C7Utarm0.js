import"../chunks/DsnmJJEf.js";import"../chunks/CkuBKPka.js";import{o as ua,s as H,e as W}from"../chunks/BsuLAxzl.js";import{m as _a,f as Aa,s as Z,h as j,a0 as Ca,a as Ma,C as T,aA as ya,j as Ia,H as Ra,k as va,l as aa,w as G,aa as La,af as Na,n as ra,o as Da,c as ka,aK as fa,Q as K,aL as da,ai as ha,a8 as ma,aM as F,t as pa,v as Ha,aN as J,aO as Pa,aP as ea,aQ as wa,ac as Oa,aR as $a,a1 as Ua,aS as ja,a5 as za,aT as ga,q as Va,aU as qa,ax as Ba,a6 as Ga,K as xa,I as P,J as R,M as ba,P as S,R as b,T as V,W as ca,X as sa,V as q,O as N,aV as Ka}from"../chunks/hUWcfofg.js";import{i as ia}from"../chunks/kL-VIWrM.js";import{i as Ea}from"../chunks/DtF09Nb2.js";import{s as Q}from"../chunks/4kqP-wJn.js";import{b as Y}from"../chunks/BRBjtBS7.js";import{S as Qa}from"../chunks/ClUcPL5X.js";import{s as Xa}from"../chunks/CdEA5IGF.js";function na(i,e){return e}function Ya(i,e,a){for(var r=i.items,l=[],f=e.length,n=0;n<f;n++)$a(e[n].e,l,!0);var u=f>0&&l.length===0&&a!==null;if(u){var _=a.parentNode;Ua(_),_.append(a),r.clear(),I(i,e[0].prev,e[f-1].next)}ja(l,()=>{for(var g=0;g<f;g++){var m=e[g];u||(r.delete(m.k),I(i,m.prev,m.next)),wa(m.e,!u)}})}function la(i,e,a,r,l,f=null){var n=i,u={flags:e,items:new Map,first:null},_=(e&ga)!==0;if(_){var g=i;n=j?Z(Ca(g)):g.appendChild(_a())}j&&Ma();var m=null,y=!1,A=new Map,d=ya(()=>{var p=a();return ma(p)?p:p==null?[]:ha(p)}),s,c;function o(){Fa(c,s,u,A,n,l,e,r,a),f!==null&&(s.length===0?m?pa(m):m=ra(()=>f(n)):m!==null&&Ha(m,()=>{m=null}))}Aa(()=>{c??=za,s=T(d);var p=s.length;if(y&&p===0)return;y=p===0;let h=!1;if(j){var E=Ia(n)===Ra;E!==(p===0)&&(n=va(),Z(n),aa(!1),h=!0)}if(j){for(var M=null,x,t=0;t<p;t++){if(G.nodeType===La&&G.data===Na){n=G,h=!0,aa(!1);break}var v=s[t],w=r(v,t);x=oa(G,u,M,null,v,w,t,l,e,a),u.items.set(w,x),M=x}p>0&&Z(va())}if(j)p===0&&f&&(m=ra(()=>f(n)));else if(Da()){var O=new Set,D=ka;for(t=0;t<p;t+=1){v=s[t],w=r(v,t);var L=u.items.get(w)??A.get(w);L?(e&(J|F))!==0&&Ta(L,v,t,e):(x=oa(null,u,null,null,v,w,t,l,e,a,!0),A.set(w,x)),O.add(w)}for(const[C,$]of u.items)O.has(C)||D.skipped_effects.add($.e);D.add_callback(o)}else o();h&&aa(!0),T(d)}),j&&(n=G)}function Fa(i,e,a,r,l,f,n,u,_){var g=(n&qa)!==0,m=(n&(J|F))!==0,y=e.length,A=a.items,d=a.first,s=d,c,o=null,p,h=[],E=[],M,x,t,v;if(g)for(v=0;v<y;v+=1)M=e[v],x=u(M,v),t=A.get(x),t!==void 0&&(t.a?.measure(),(p??=new Set).add(t));for(v=0;v<y;v+=1){if(M=e[v],x=u(M,v),t=A.get(x),t===void 0){var w=r.get(x);if(w!==void 0){r.delete(x),A.set(x,w);var O=o?o.next:s;I(a,o,w),I(a,w,O),ta(w,O,l),o=w}else{var D=s?s.e.nodes_start:l;o=oa(D,a,o,o===null?a.first:o.next,M,x,v,f,n,_)}A.set(x,o),h=[],E=[],s=o.next;continue}if(m&&Ta(t,M,v,n),(t.e.f&ea)!==0&&(pa(t.e),g&&(t.a?.unfix(),(p??=new Set).delete(t))),t!==s){if(c!==void 0&&c.has(t)){if(h.length<E.length){var L=E[0],C;o=L.prev;var $=h[0],B=h[h.length-1];for(C=0;C<h.length;C+=1)ta(h[C],L,l);for(C=0;C<E.length;C+=1)c.delete(E[C]);I(a,$.prev,B.next),I(a,o,$),I(a,B,L),s=L,o=B,v-=1,h=[],E=[]}else c.delete(t),ta(t,s,l),I(a,t.prev,t.next),I(a,t,o===null?a.first:o.next),I(a,o,t),o=t;continue}for(h=[],E=[];s!==null&&s.k!==x;)(s.e.f&ea)===0&&(c??=new Set).add(s),E.push(s),s=s.next;if(s===null)continue;t=s}h.push(t),o=t,s=t.next}if(s!==null||c!==void 0){for(var k=c===void 0?[]:ha(c);s!==null;)(s.e.f&ea)===0&&k.push(s),s=s.next;var U=k.length;if(U>0){var X=(n&ga)!==0&&y===0?l:null;if(g){for(v=0;v<U;v+=1)k[v].a?.measure();for(v=0;v<U;v+=1)k[v].a?.fix()}Ya(a,k,X)}}g&&Va(()=>{if(p!==void 0)for(t of p)t.a?.apply()}),i.first=a.first&&a.first.e,i.last=o&&o.e;for(var z of r.values())wa(z.e);r.clear()}function Ta(i,e,a,r){(r&J)!==0&&fa(i.v,e),(r&F)!==0?fa(i.i,a):i.i=a}function oa(i,e,a,r,l,f,n,u,_,g,m){var y=(_&J)!==0,A=(_&Pa)===0,d=y?A?K(l,!1,!1):da(l):l,s=(_&F)===0?n:da(n),c={i:s,v:d,k:f,a:null,e:null,prev:a,next:r};try{if(i===null){var o=document.createDocumentFragment();o.append(i=_a())}return c.e=ra(()=>u(i,d,s,g),j),c.e.prev=a&&a.e,c.e.next=r&&r.e,a===null?m||(e.first=c):(a.next=c,a.e.next=c.e),r!==null&&(r.prev=c,r.e.prev=c.e),c}finally{}}function ta(i,e,a){for(var r=i.next?i.next.e.nodes_start:a,l=e?e.e.nodes_start:a,f=i.e.nodes_start;f!==null&&f!==r;){var n=Oa(f);l.before(f),f=n}}function I(i,e,a){e===null?i.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function Ja(i,e,a){var r=Ba(i,e);r&&r.set&&(i[e]=a,Ga(()=>{i[e]=null}))}function Wa(i,e){var a=i.$$events?.[e.type],r=ma(a)?a.slice():a==null?[]:[a];for(var l of r)l.call(this,e)}var Za=P('<p class="error"> </p>'),ae=P('<a class="tag svelte-1aoobli"> </a>'),ee=P('<div class="list__item svelte-1aoobli"><a class="title svelte-1aoobli"> </a> <p class="description svelte-1aoobli"> </p> <div class="meta svelte-1aoobli"><span class="date"> </span></div> <div class="tags svelte-1aoobli"></div></div>'),te=P('<div class="list svelte-1aoobli"><!></div>');function re(i,e){xa(e,!1);async function a(d=1,s=10){const c=new URLSearchParams({page:d.toString(),limit:s.toString()}),o=await fetch(`http://localhost:8080/articles?${c.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok){const h=await o.json().catch(()=>({message:o.statusText}));throw new Error(h.message||`Ошибка ${o.status}`)}return await o.json()}let r=K([]),l=1,f=10,n=K(!1),u=K(null);async function _(){V(n,!0),V(u,null);try{const{posts:d,page:s,limit:c}=await a(l,f);V(r,d),l=s,f=c}catch(d){V(u,d instanceof Error?d.message:String(d))}finally{V(n,!1)}}ua(_),Ea();var g=te(),m=S(g);{var y=d=>{Qa(d)},A=d=>{var s=ca(),c=sa(s);{var o=h=>{var E=Za(),M=S(E,!0);b(E),q(()=>H(M,T(u))),R(h,E)},p=h=>{var E=ca(),M=sa(E);la(M,1,()=>T(r),na,(x,t)=>{var v=ee(),w=S(v),O=S(w,!0);b(w);var D=N(w,2),L=S(D,!0);b(D);var C=N(D,2),$=S(C),B=S($,!0);b($),b(C);var k=N(C,2);la(k,5,()=>T(t).tags,na,(U,X)=>{var z=ae(),Sa=S(z,!0);b(z),q(()=>{Q(z,"href",`${Y??""}/?tag=${T(X)??""}`),H(Sa,T(X))}),R(U,z)}),b(k),b(v),q(U=>{Q(w,"href",`${Y??""}/articles?post=${T(t).uuid??""}`),H(O,T(t).title),H(L,T(t).description),H(B,U)},[()=>new Date(T(t).created_at).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"})]),R(x,v)}),R(h,E)};ia(c,h=>{T(u)?h(o):h(p,!1)},!0)}R(d,s)};ia(m,d=>{T(n)?d(y):d(A,!1)})}return b(g),R(i,g),Ja(e,"fetchPosts",a),ba({fetchPosts:a})}var se=P('<a class="tag svelte-1jwx8yd"> </a>'),ie=P('<header class="svelte-1jwx8yd"><img alt="avatar" class="avatar svelte-1jwx8yd"/> <div class="info svelte-1jwx8yd"><h1 class="name svelte-1jwx8yd"> </h1> <p class="description svelte-1jwx8yd"> </p> <div class="tags svelte-1jwx8yd"></div></div></header>');function ne(i){const e={avatar:"https://avatars.githubusercontent.com/u/145584656?v=4",name:"Никита Архипов",description:"Описание профиля."},a=["Rust","Golang"];var r=ie(),l=S(r),f=N(l,2),n=S(f),u=S(n,!0);b(n);var _=N(n,2),g=S(_,!0);b(_);var m=N(_,2);la(m,5,()=>a,na,(y,A)=>{var d=se(),s=S(d,!0);b(d),q(()=>{Q(d,"href",`${Y??""}/?tag=${T(A)??""}`),H(s,T(A))}),R(y,d)}),b(m),b(f),b(r),q(()=>{Q(l,"src",e.avatar),H(u,e.name),H(g,e.description)}),R(i,r)}var le=P('<div class="unauthorized-frame svelte-odmeox"><div class="window svelte-odmeox"><div class="popup svelte-odmeox"><img alt="Unauthorized access" class="svelte-odmeox"/> <h1 class="text-2xl font-bold">Эй, дружок!</h1> <div class="mt-1 text-lg">Кажется, ты выбрал не тот эндпоинт. Вход для посетителей на главной странице.</div></div> <button class="close svelte-odmeox" aria-label="Close"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="svelte-odmeox"><path d="M1 1L15 15M15 1L1 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg></button></div></div>');function oe(i,e){function a(){window.location.href="/"}var r=le(),l=S(r),f=S(l),n=S(f);Ka(4),b(f);var u=N(f,2);b(l),b(r),q(()=>Q(n,"src",`${Y??""}/images/unauthorized-access.jpg`)),W("click",u,a),W("click",l,Xa(function(_){Wa.call(this,e,_)})),W("click",r,a),R(i,r)}var ve=P("<!> <!> <!>",1);function xe(i,e){xa(e,!1);let a=K();ua(()=>{const _=new URLSearchParams(window.location.search);V(a,_.has("unauthorized"))}),Ea();var r=ve(),l=sa(r);{var f=_=>{oe(_,{})};ia(l,_=>{T(a)&&_(f)})}var n=N(l,2);ne(n);var u=N(n,2);re(u,{}),R(i,r),ba()}export{xe as component};
